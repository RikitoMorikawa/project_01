# CloudFront ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ³

## ğŸŒ ç¾åœ¨ã®æ§‹æˆ

### æ—¢å­˜ã®ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

#### é–‹ç™ºç’°å¢ƒ âœ…

- **ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ ID**: `E1RDC06Y79TYSS`
- **ãƒ‰ãƒ¡ã‚¤ãƒ³**: `d2m0cmcbfsdzr7.cloudfront.net`
- **ã‚ªãƒªã‚¸ãƒ³ S3 ãƒã‚±ãƒƒãƒˆ**: `csr-lambda-api-dev-main-frontends3bucket-a8n79be9xmun`
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Deployed âœ…
- **ã‚³ãƒ¡ãƒ³ãƒˆ**: "csr-lambda-api dev CloudFront Distribution"
- **ä½œæˆæ—¥**: 2025-10-03

#### ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ âœ…

- **ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ ID**: `E3O28FOVC3Y5MT`
- **ãƒ‰ãƒ¡ã‚¤ãƒ³**: `duj7ktbo6vvsq.cloudfront.net`
- **ã‚ªãƒªã‚¸ãƒ³ S3 ãƒã‚±ãƒƒãƒˆ**: `csr-lambda-api-staging-main-frontends3bucket-km8rwitvfylz`
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Deployed âœ…
- **ã‚³ãƒ¡ãƒ³ãƒˆ**: "csr-lambda-api staging CloudFront Distribution"

### ä¸è¶³ã—ã¦ã„ã‚‹ç’°å¢ƒ

#### æœ¬ç•ªç’°å¢ƒ

- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: æœªä½œæˆ âŒ
- **å¿…è¦ãªãƒªã‚½ãƒ¼ã‚¹**:
  - CloudFront ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³
  - S3 ãƒã‚±ãƒƒãƒˆï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç”¨ï¼‰

## ğŸ—ï¸ æ¨å¥¨ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å®Œå…¨ãªç’°å¢ƒæ§‹æˆ

```
é–‹ç™ºç’°å¢ƒ (develop ãƒ–ãƒ©ãƒ³ãƒ) âœ…
â”œâ”€â”€ CloudFront: d2m0cmcbfsdzr7.cloudfront.net
â”œâ”€â”€ S3: csr-lambda-api-dev-main-frontends3bucket-a8n79be9xmun
â”œâ”€â”€ Lambda: csr-lambda-api-dev-api-function
â””â”€â”€ Aurora MySQL: csr-lambda-api-dev-aurora

ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ (main ãƒ–ãƒ©ãƒ³ãƒ) âœ…
â”œâ”€â”€ CloudFront: duj7ktbo6vvsq.cloudfront.net
â”œâ”€â”€ S3: csr-lambda-api-staging-main-frontends3bucket-km8rwitvfylz
â””â”€â”€ Lambda: csr-lambda-api-staging-api-function

æœ¬ç•ªç’°å¢ƒ (æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤) âŒ
â”œâ”€â”€ CloudFront: æœªä½œæˆ
â”œâ”€â”€ S3: æœªä½œæˆ
â””â”€â”€ Lambda: æœªä½œæˆ
```

## ğŸš€ å¿…è¦ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### 1. é–‹ç™ºç’°å¢ƒ CloudFront ä½œæˆ âœ…

```bash
# é–‹ç™ºç’°å¢ƒç”¨CloudFrontãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆï¼ˆå®Œäº†ï¼‰
./scripts/create-dev-cloudfront.sh
# ã¾ãŸã¯
make setup-dev-cloudfront
```

**çµæœ**:

- ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ ID: `E1RDC06Y79TYSS`
- ãƒ‰ãƒ¡ã‚¤ãƒ³: `https://d2m0cmcbfsdzr7.cloudfront.net`

### 2. æœ¬ç•ªç’°å¢ƒ CloudFront ä½œæˆ

```bash
# æœ¬ç•ªç’°å¢ƒç”¨CloudFrontãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆï¼ˆæœªå®Ÿè£…ï¼‰
./scripts/create-prod-cloudfront.sh
```

### 3. S3 ãƒã‚±ãƒƒãƒˆçŠ¶æ³ âœ…

ç¾åœ¨ã® S3 ãƒã‚±ãƒƒãƒˆçŠ¶æ³ï¼ˆç¢ºèªæ¸ˆã¿ï¼‰ï¼š

```bash
# ç’°å¢ƒåˆ¥S3ãƒã‚±ãƒƒãƒˆä¸€è¦§
csr-lambda-api-dev-main-frontends3bucket-a8n79be9xmun          # é–‹ç™ºç’°å¢ƒ âœ…
csr-lambda-api-staging-main-frontends3bucket-km8rwitvfylz      # ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ âœ…
csr-lambda-api-dev-lambda-deployments-992382521689             # é–‹ç™ºç’°å¢ƒLambda âœ…
csr-lambda-api-staging-lambda-deployments-992382521689         # ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒLambda âœ…
```

## ğŸ” ç¾åœ¨ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼çŠ¶æ³

### GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

- **dev-deploy.yml**: âœ… æ­£å¸¸å‹•ä½œï¼ˆCloudFront ä½œæˆå®Œäº†ï¼‰
- **staging-deploy.yml**: âœ… æ­£å¸¸å‹•ä½œï¼ˆCloudFront å­˜åœ¨ï¼‰
- **prod-deploy.yml**: âŒ æœ¬ç•ªç’°å¢ƒ CloudFront ãŒå­˜åœ¨ã—ãªã„ãŸã‚ã€ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¤±æ•—ã™ã‚‹å¯èƒ½æ€§

## ğŸ“‹ å„ªå…ˆåº¦

### é«˜å„ªå…ˆåº¦ âœ…

1. ~~**é–‹ç™ºç’°å¢ƒ CloudFront ä½œæˆ**: æ—¥å¸¸é–‹ç™ºã§å¿…è¦~~ **å®Œäº†**
2. ~~**é–‹ç™ºç’°å¢ƒ S3 ãƒã‚±ãƒƒãƒˆä½œæˆ**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ãƒ—ãƒ­ã‚¤ã«å¿…è¦~~ **å®Œäº†**

### ä¸­å„ªå…ˆåº¦

3. **æœ¬ç•ªç’°å¢ƒ CloudFront ä½œæˆ**: æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹æ™‚ã«å¿…è¦
4. **æœ¬ç•ªç’°å¢ƒ S3 ãƒã‚±ãƒƒãƒˆä½œæˆ**: æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹æ™‚ã«å¿…è¦

### ä½å„ªå…ˆåº¦

5. **ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³è¨­å®š**: å¿…è¦ã«å¿œã˜ã¦
6. **WAF è¨­å®š**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–æ™‚ã«

## ğŸ› ï¸ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. ~~**S3 ãƒã‚±ãƒƒãƒˆçŠ¶æ³ç¢ºèª**~~ âœ… **å®Œäº†**
2. ~~**é–‹ç™ºç’°å¢ƒã‚¤ãƒ³ãƒ•ãƒ©ä½œæˆ**~~ âœ… **å®Œäº†**
3. **æœ¬ç•ªç’°å¢ƒã‚¤ãƒ³ãƒ•ãƒ©ä½œæˆ**: æœ¬ç•ªç’°å¢ƒç”¨ CloudFront + S3
4. ~~**GitHub Actions ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¿®æ­£**~~ âœ… **å‹•ä½œç¢ºèªæ¸ˆã¿**
5. **ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**: é–‹ç™ºç’°å¢ƒã§ã®å‹•ä½œç¢ºèª

## ğŸ¯ ç¾åœ¨ã®çŠ¶æ³

### å®Œäº†æ¸ˆã¿ âœ…

- é–‹ç™ºç’°å¢ƒ CloudFront ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
- é–‹ç™ºç’°å¢ƒ S3 ãƒã‚±ãƒƒãƒˆç¢ºèª
- é–‹ç™ºç’°å¢ƒ Aurora MySQL ä½œæˆ
- ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ CloudFront ç¢ºèª

### æ®‹ä½œæ¥­ âŒ

- æœ¬ç•ªç’°å¢ƒ CloudFront ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
- æœ¬ç•ªç’°å¢ƒ S3 ãƒã‚±ãƒƒãƒˆä½œæˆ
- æœ¬ç•ªç’°å¢ƒ Aurora MySQL ä½œæˆ

## ğŸš€ åˆ©ç”¨å¯èƒ½ãªã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºç’°å¢ƒ CloudFront ä½œæˆï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
make setup-dev-cloudfront

# é–‹ç™ºç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤ãƒ†ã‚¹ãƒˆ
git checkout develop
git push origin develop

# é–‹ç™ºç’°å¢ƒã‚¢ã‚¯ã‚»ã‚¹ãƒ†ã‚¹ãƒˆ
curl -I https://d2m0cmcbfsdzr7.cloudfront.net
```
