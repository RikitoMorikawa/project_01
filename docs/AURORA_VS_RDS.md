# Aurora MySQL vs RDS MySQL æ¯”è¼ƒ

## ğŸ—ï¸ ç¾åœ¨ã®æ§‹æˆ

### ä½œæˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

- **ã‚¿ã‚¤ãƒ—**: Aurora MySQL
- **ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼**: `csr-lambda-api-dev-aurora`
- **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹**: `csr-lambda-api-dev-aurora-instance-1`
- **ã‚¨ãƒ³ã‚¸ãƒ³**: `aurora-mysql 8.0.mysql_aurora.3.10.1`
- **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¯ãƒ©ã‚¹**: `db.r5.large`

## ğŸ“Š Aurora MySQL vs RDS MySQL æ¯”è¼ƒ

### Aurora MySQLï¼ˆç¾åœ¨ä½¿ç”¨ä¸­ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Aurora MySQL             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     Aurora Cluster          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚Writer   â”‚ â”‚Reader   â”‚    â”‚ â”‚
â”‚  â”‚  â”‚Instance â”‚ â”‚Instance â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         Aurora Storage           â”‚
â”‚    (è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãƒ»è¤‡è£½)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹å¾´:**

- âœ… **é«˜å¯ç”¨æ€§**: è‡ªå‹•ãƒ•ã‚§ã‚¤ãƒ«ã‚ªãƒ¼ãƒãƒ¼
- âœ… **è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒè‡ªå‹•æ‹¡å¼µ
- âœ… **é«˜æ€§èƒ½**: æœ€å¤§ 5 å€ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- âœ… **èª­ã¿å–ã‚Šãƒ¬ãƒ—ãƒªã‚«**: æœ€å¤§ 15 å€‹ã¾ã§
- âœ… **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: ç¶™ç¶šçš„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- âœ… **ã‚°ãƒ­ãƒ¼ãƒãƒ«å±•é–‹**: Aurora Global Database
- âŒ **ã‚³ã‚¹ãƒˆ**: RDS MySQL ã‚ˆã‚Šé«˜ä¾¡
- âŒ **è¤‡é›‘æ€§**: è¨­å®šãŒã‚„ã‚„è¤‡é›‘

### RDS MySQLï¼ˆå¾“æ¥å‹ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         RDS MySQL               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      Single Instance        â”‚ â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚ â”‚
â”‚  â”‚    â”‚   MySQL Server  â”‚      â”‚ â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         EBS Storage             â”‚
â”‚      (æ‰‹å‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‰¹å¾´:**

- âœ… **ã‚·ãƒ³ãƒ—ãƒ«**: å¾“æ¥ã® MySQL ã¨åŒã˜
- âœ… **ã‚³ã‚¹ãƒˆ**: Aurora ã‚ˆã‚Šå®‰ä¾¡
- âœ… **äº’æ›æ€§**: å®Œå…¨ãª MySQL äº’æ›
- âŒ **å¯ç”¨æ€§**: å˜ä¸€éšœå®³ç‚¹
- âŒ **ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: æ‰‹å‹•ã§ã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
- âŒ **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: Aurora ã‚ˆã‚ŠåŠ£ã‚‹

## ğŸ’° ã‚³ã‚¹ãƒˆæ¯”è¼ƒï¼ˆæ¦‚ç®—ï¼‰

### Aurora MySQLï¼ˆç¾åœ¨ã®æ§‹æˆï¼‰

```
db.r5.large ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹:
- æ™‚é–“å˜ä¾¡: ~$0.29/æ™‚é–“
- æœˆé¡: ~$210/æœˆ
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: $0.10/GB/æœˆ
- I/O: $0.20/100ä¸‡ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
```

### RDS MySQLï¼ˆåŒç­‰æ§‹æˆï¼‰

```
db.t3.medium ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹:
- æ™‚é–“å˜ä¾¡: ~$0.068/æ™‚é–“
- æœˆé¡: ~$50/æœˆ
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: $0.115/GB/æœˆï¼ˆgp2ï¼‰
```

## ğŸ¯ ä½¿ã„åˆ†ã‘ã®æŒ‡é‡

### Aurora MySQL ã‚’é¸ã¶ã¹ãå ´åˆ

- **é«˜å¯ç”¨æ€§ãŒå¿…è¦**
- **èª­ã¿å–ã‚Šè² è·ãŒé«˜ã„**
- **ã‚°ãƒ­ãƒ¼ãƒãƒ«å±•é–‹äºˆå®š**
- **è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãŒå¿…è¦**
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’é‡è¦–**

### RDS MySQL ã‚’é¸ã¶ã¹ãå ´åˆ

- **ã‚³ã‚¹ãƒˆã‚’é‡è¦–**
- **ã‚·ãƒ³ãƒ—ãƒ«ãªæ§‹æˆã§ååˆ†**
- **å°è¦æ¨¡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**
- **å¾“æ¥ã® MySQL ã‹ã‚‰ç§»è¡Œ**

## ğŸ”„ ç¾åœ¨ã®æ§‹æˆã‚’å¤‰æ›´ã™ã‚‹å ´åˆ

### Aurora â†’ RDS MySQL ã«å¤‰æ›´

```bash
# 1. ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
mysqldump -h aurora-endpoint -u dev_user -p csr_lambda_dev > backup.sql

# 2. RDS MySQL ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆ
aws rds create-db-instance \
    --db-instance-identifier csr-lambda-dev-mysql \
    --db-instance-class db.t3.medium \
    --engine mysql \
    --master-username dev_user \
    --master-user-password DevPassword123! \
    --allocated-storage 20

# 3. ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
mysql -h rds-endpoint -u dev_user -p csr_lambda_dev < backup.sql
```

### RDS MySQL â†’ Aurora ã«å¤‰æ›´

```bash
# 1. ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ä½œæˆ
aws rds create-db-snapshot \
    --db-instance-identifier source-mysql \
    --db-snapshot-identifier mysql-to-aurora-snapshot

# 2. Auroraã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’ä½œæˆ
aws rds restore-db-cluster-from-snapshot \
    --db-cluster-identifier new-aurora-cluster \
    --snapshot-identifier mysql-to-aurora-snapshot \
    --engine aurora-mysql
```

## ğŸš¨ ç¾åœ¨ã®æ§‹æˆã§ã®æ³¨æ„ç‚¹

### ã‚³ã‚¹ãƒˆç®¡ç†

- **db.r5.large** ã¯é–‹ç™ºç’°å¢ƒã«ã¯å¤§ãã™ãã‚‹å¯èƒ½æ€§
- **æ¨å¥¨**: `db.t3.medium` ã¾ãŸã¯ `db.t4g.medium` ã«å¤‰æ›´

### é–‹ç™ºç’°å¢ƒã§ã®æ¨å¥¨å¤‰æ›´

```bash
# ã‚ˆã‚Šå°ã•ãªã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«å¤‰æ›´
aws rds modify-db-instance \
    --db-instance-identifier csr-lambda-api-dev-aurora-instance-1 \
    --db-instance-class db.t3.medium \
    --apply-immediately
```

## ğŸ“‹ ã¾ã¨ã‚

**ç¾åœ¨ã®æ§‹æˆ**: Aurora MySQLï¼ˆé«˜æ€§èƒ½ãƒ»é«˜å¯ç”¨æ€§ãƒ»é«˜ã‚³ã‚¹ãƒˆï¼‰

**é–‹ç™ºç’°å¢ƒã§ã®æ¨å¥¨**:

1. **ç¶™ç¶šä½¿ç”¨**: æœ¬ç•ªç’°å¢ƒã¨åŒã˜æ§‹æˆã§ãƒ†ã‚¹ãƒˆ
2. **ã‚³ã‚¹ãƒˆå‰Šæ¸›**: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¯ãƒ©ã‚¹ã‚’å°ã•ãå¤‰æ›´
3. **RDS å¤‰æ›´**: ã‚³ã‚¹ãƒˆé‡è¦–ãªã‚‰ RDS MySQL ã«å¤‰æ›´

ã©ã®é¸æŠè‚¢ã‚’å–ã‚‹ã‹ã¯ã€é–‹ç™ºãƒãƒ¼ãƒ ã®æ–¹é‡ã¨ã‚³ã‚¹ãƒˆäºˆç®—ã«ã‚ˆã‚Šã¾ã™ã€‚
